# PPO_Group4

# Лабораторная работа 1

## Вопросы

1. **Какие данные должен предоставить пользователь при регистрации?**
2. **Что должно произойти, если пользователь пытается зарегистрироваться с логином, который уже занят?**
3. **Может ли пользователь изменить свой логин или пароль после регистрации?**
4. **Что должно произойти после неудачной попытки входа в систему?**
5. **Как пользователи могут находить и добавлять других участников в проект? Предусмотрена ли функциональность поиска? Если да, то как она должна работать?**
6. **Могут ли пользователи видеть проекты, в которых они не являются участниками?**
7. **Существуют ли разные роли или уровни доступа для участников проекта? Например, есть ли у создателя проекта особые права?**
8. **Есть ли ограничения на количество участников в проекте или количество задач в проекте?**
9. **Какие статусы могут иметь задачи?**
10. **Нужно ли сохранять историю изменений проектов и задач? Если да, то какую информацию она должна включать?**
11. **Может ли пользователь быть назначен исполнителем нескольких задач в одном проекте?**
12. **Как должны отображаться и сортироваться задачи внутри проекта? Требуются ли возможности фильтрации или сортировки?**
13. **Какая информация должна отображаться на главной странице пользователя после аутентификации?**

## Ответы

1. **Пользователь должен предоставить логин и пароль при регистрации.**
2. **Если логин уже занят, система должна отклонить регистрацию, вывести информативное сообщение и вернуть пользователя на форму регистрации без потери введённых данных.**
3. **Пользователь не может изменить свой логин или пароль после регистрации.**
4. **После неудачной попытки входа система предлагает пользователю попробовать снова с другими данными.**
5. **Пользователи могут искать других участников по никнейму. Результаты поиска сортируются от наибольшего совпадения к наименьшему.**
6. **Нет, пользователи не могут видеть проекты, в которых они не являются участниками.**
7. **Все участники проекта имеют равные права, однако только создатель проекта может изменять название проекта и удалять его.**
8. **Ограничений на количество участников в проекте и задач нет.**
9. **Задачи могут иметь статусы: "новая", "в работе", "ревью", "завершена".**
10. **Да, должна быть возможность отслеживать историю изменений проектов и задач, включая дату изменения, состояние до и после, и идентификатор пользователя, внесшего изменение. История должна быть доступна даже после удаления сущности.**
11. **Да, пользователь может быть исполнителем нескольких задач в одном проекте.**
12. **Задачи должны отображаться в виде таблицы, отсортированной по статусу. Внутри статуса сортировка по приоритету и дате обновления (более приоритетные и недавно обновлённые задачи — выше).**
13. **На главной странице после аутентификации должен отображаться список проектов, в которых пользователь участвует, отсортированных по дате изменения и принадлежности (сначала проекты, которыми владеет пользователь и которые были изменены недавно).**

## Функциональные требования

1. **Пользователь должен иметь возможность зарегистрироваться, предоставив уникальный логин и пароль.**
   - Логин должен быть не короче 5 символов, содержать только буквы латинского алфавита и цифры.
   - Пароль должен быть не короче 8 символов, без ограничений по символам.
   - Если логин уже занят, регистрация отклоняется с информативным сообщением, и пользователь возвращается на форму без потери введённых данных.
2. **Пользователь должен иметь возможность аутентифицироваться в системе, вводя свой логин и пароль.**
   - После успешной аутентификации пользователь попадает на главную страницу со списком проектов, в которых он участвует.
   - После неудачной попытки входа пользователь получает сообщение об ошибке и предложение попробовать снова.
3. **Пользователь не должен иметь возможность изменять свой логин или пароль после регистрации.**
4. **Авторизованный пользователь должен иметь возможность создавать новый проект, указав уникальное название проекта.**
   - Если название проекта уже занято, создание отклоняется с информативным сообщением, и пользователь возвращается на форму без потери введённых данных.
   - Опционально можно указать идентификаторы участников для добавления в проект при создании.
   - После создания пользователь становится создателем и участником проекта.
5. **Создатель проекта должен иметь возможность изменять название проекта и удалять проект.**
6. **Пользователь должен иметь возможность просматривать список проектов, в которых он участвует, отсортированных по дате изменения и принадлежности (сначала проекты, которыми он владеет и которые изменены недавно).**
7. **Участник проекта должен иметь возможность добавлять других пользователей в проект, указав их идентификаторы (никнеймы).**
   - Должна быть реализована функция поиска пользователей по подстроке никнейма, с сортировкой результатов от наибольшего совпадения к наименьшему.
8. **Участник проекта должен иметь возможность создавать задачи внутри проекта, указав уникальное в рамках проекта название задачи.**
   - Опционально можно указать исполнителя (только один исполнитель), оценку в днях и приоритет (низкий, средний, высокий).
   - Если название задачи уже занято в рамках проекта, создание отклоняется с информативным сообщением, и пользователь возвращается на форму без потери введённых данных.
   - После создания задача получает статус "новая", и пользователь становится её создателем.
9. **Участник проекта должен иметь возможность просматривать список задач проекта в виде таблицы.**
   - Задачи должны быть отсортированы по статусу.
   - Внутри каждого статуса задачи сортируются по приоритету и дате обновления (более приоритетные и недавно обновлённые задачи выше).
10. **Участник проекта должен иметь возможность изменять любые поля любой задачи проекта, включая название, исполнителя, оценку, приоритет и статус.**
11. **Участник проекта должен иметь возможность удалять любые задачи внутри проекта.**
12. **Задачи могут иметь следующие статусы: "новая", "в работе", "ревью", "завершена".**
13. **Система должна сохранять историю изменений проектов и задач.**
    - История должна включать дату изменения, состояние до и после изменения, а также идентификатор пользователя, совершившего изменение.
    - История должна быть доступна по соответствующим идентификаторам даже после удаления проекта или задачи.
14. **Пользователь должен иметь возможность выйти из системы (разлогиниться).**
15. **Ограничений на количество участников в проекте и количество задач в проекте нет.**
16. **Пользователь может быть назначен исполнителем нескольких задач в одном проекте.**
17. **Пользователи не должны иметь доступа к проектам, в которых они не являются участниками.**

# Лабораторная работа 2

## Ubiquitous Language

| **Термин**               | **Краткое пояснение**                                                                                                                                                                                                                                                                                                                                                                            | **Атрибуты**                                                                                                                                                                                   | **Ассоциированные термины**                                                                                                            | **Действия над предметом**                                                                                                                                                                                          |
|--------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Пользователь (User)**  | Существующий (зарегистрированный) в системе пользователь                                                                                                                                                                                                                                                                                                                                         | - Имя<br>- Никнейм<br>- Пароль                                                                                                                                                                  | (нет)                                                                                                                                   | - **Добавление в проект**<br>(участник проекта → добавляет в проект → пользователя, пользователь становится участником)                                                                                             |
| **Гость (Guest)**        | Посетитель сайта, который не аутентифицирован. Ему нужно пройти регистрацию или ввести свои данные (никнейм и пароль). Не имеет идентичности, все гости одинаковы                                                                                                                                                                                                                                | (нет)                                                                                                                                                                                           | (нет)                                                                                                                                   | (нет)                                                                                                                                                                                                                |
| **Проект (Project)**     | Логическая сущность, которая объединяет в себе некоторое количество участников проекта (они являются пользователями), которые могут создавать задачи внутри этого проекта, а также задачи проекта. Соответственно, только участники проекта могут просматривать его содержимое и изменять его.                                                                                                    | - Имя<br>- Участник<br>- Задача                                                                                                                                                                 | Проект содержит участников и задачи, которые относятся к данному проекту                                                                | - **Создание**<br>(пользователь → создает → проект)<br><br>- **Просмотр**<br>(участник проекта → просматривает → проект)                                                                                            |
| **Задача**               | Конкретное задание внутри проекта, требующее выполнения.                                                                                                                                                                                                                                                                                                                                          | - Название<br>- Описание<br>- Статус<br>- Приоритет<br>- Оценка в днях<br>- Дата создания<br>- Дата обновления<br>- Исполнитель<br>- Создатель                                                 | Проект<br>Исполнитель<br>Статус<br>Приоритет<br>История изменений                                                                      | - **Создание**<br>(задача создается участником проекта)<br><br>- **Изменение**<br>(любой участник может изменить)<br><br>- **Удаление**<br>(любой участник может удалить)<br><br>- **Назначение исполнителя**<br>- **Изменение статуса** |
| **Исполнитель**          | Участник проекта, назначенный на выполнение задачи.                                                                                                                                                                                                                                                                                                                                               | (нет)                                                                                                                                                                                           | Задача<br>Пользователь<br>Участник                                                                                                      | (нет)                                                                                                                                                                                                                |
| **Участник**             | Пользователь, добавленный в проект и имеющий доступ к его задачам.                                                                                                                                                                                                                                                                                                                               | (нет)                                                                                                                                                                                           | Проект<br>Пользователь<br>Задача                                                                                                        | (нет)                                                                                                                                                                                                                |
| **Статус задачи**        | Текущее состояние задачи в рабочем процессе.                                                                                                                                                                                                                                                                                                                                                     | - Новая<br>- В работе<br>- Ревью<br>- Завершена                                                                                                                                                 | Задача                                                                                                                                   | (нет)                                                                                                                                                                                                                |
| **Приоритет задачи**     | Уровень важности задачи.                                                                                                                                                                                                                                                                                                                                                                         | - Низкий<br>- Средний<br>- Высокий                                                                                                                                                              | Задача                                                                                                                                   | (нет)                                                                                                                                                                                                                |
| **История изменений**    | Запись всех изменений, произведенных над проектами и задачами, включая детали изменений.                                                                                                                                                                                                                                                                                                          | - Дата изменения<br>- Состояние до изменения<br>- Состояние после изменения<br>- Пользователь, внесший изменение                                         | Проект<br>Задача<br>Пользователь                                                                                                        | - **Просмотр истории**<br>(участники могут просматривать историю изменений проектов и задач)                                                                                  |
| **Состояние**            | Снимок системы в конкретный момент времени                                                                                                                                                                                                                                                                                                                                                      | (нет)                                                                                                                                                                                           | (нет)                                                                                                                                   | - **Сохранение состояния**<br>(система → сохраняет → состояние)                                                                                                             |
| **Поиск**                | Функциональность для нахождения пользователей по никнейму.                                                                                                                                                                                                                                                                                                                                        | (нет)                                                                                                                                                                                           | Пользователь                                                                                                                            | - **Ввод поискового запроса**<br>(участник вводит строку для поиска)                                                                                                         |
| **Аутентификация**       | Процесс проверки учетных данных пользователя для предоставления доступа к системе.                                                                                                                                                                                                                                                                                                               | (нет)                                                                                                                                                                                           | (нет)                                                                                                                                   | (нет)                                                                                                                                                                                                                |
| **Регистрация**          | Процесс создания новой учетной записи в системе.                                                                                                                                                                                                                                                                                                                                                 | (нет)                                                                                                                                                                                           | (нет)                                                                                                                                   | (нет)                                                                                                                                                                                                                |
| **Удаление**             | Процесс удаления сущности из системы или из определенного контекста (например, удаление пользователя из проекта).                                                                                                                                                                                                                                                                                 | - Объект удаления (проект, задача, участник)                                                                                                                                                    | Проект<br>Задача<br>Участник                                                                                                            | - **Инициирование удаления**<br>(участник или создатель запускает процесс удаления)<br><br>- **Подтверждение удаления**<br>(система может запросить подтверждение перед удалением)                                 |

## Bounded Contexts

| **Название контекста**                 | **Краткое пояснение**                                                                                                                                                    | **Язык контекста**                                                                                                                                                                                 |
|----------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Контекст "Авторизация"**             | Процесс регистрации и входа в систему, а также управление аутентификацией пользователя.                                                                                   | Гость, Пароль, Никнейм, Пользователь                                                                                                                                                               |
| **Контекст "Управление проектом"**     | Управление созданием и изменением проектов, добавлением участников, удалением проектов и изменением их атрибутов.                                                         | Проект, Участник, Название проекта, Дата создания, Дата обновления, Добавление участника, Удаление участника, Изменение названия проекта, Удаление проекта                                         |
| **Контекст "Управление задачей"**      | Управление задачами внутри проектов: создание, редактирование, назначение исполнителей, удаление задач.                                                                    | Задача, Исполнитель, Название задачи, Описание, Дата создания, Дата обновления, Добавление задачи, Изменение задачи, Удаление задачи, Назначение исполнителя, Проект                               |
| **Контекст "История изменений"**       | Хранение и отображение истории изменений над проектами и задачами. Этот контекст обеспечивает возможность просматривать детали изменений.                                  | История изменений, Дата изменения, Состояние до изменения, Состояние после изменения, Пользователь, внесший изменение, Просмотр истории                                                             |
| **Контекст "Поиск"**                   | Поиск пользователей по никнейму для добавления их в проекты или назначения на задачи.                                                                                     | Поиск, Никнейм, Пользователь, Отображение результатов                                                                                                                                              |


# Лабораторная работа 3

## Сущности и их атрибуты

| **Сущность**               | **Атрибуты**                                                                                                                                                                                                                                                          | **Пояснения, если необходимы по вашему мнению**                                                                                                        | **Контекст**                                                                                           |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| **User**                   | - **id**: `UUID`<br>- **nickname**: `String`<br>- **name**: `String`<br>- **password**: `String`                                                                                                                                                                      |                                                                                                                                                         | Авторизация, Создание проекта, Поиск, Управление участниками                                           |
| **Project**                | - **id**: `UUID`<br>- **name**: `String`<br>- **participants**: `List[Participant]`<br>- **tasks**: `List[UUID]`                                                                                                                                                      | В атрибуте `participants` хранятся экземпляры класса `Participant`, в атрибуте `tasks` хранятся `UUID` задач                                          | Управление проектом, Управление задачей, Управление участниками, История изменений                     |
| **Task**                   | - **id**: `UUID`<br>- **projectId**: `UUID`<br>- **description**: `String`<br>- **status**: `Enum`<br>- **priority**: `Enum`<br>- **creationDate**: `Date`<br>- **lastUpdate**: `Date`<br>- **estimatedTime**: `Integer`                                                |                                                                                                                                                         | Управление задачей, История изменений                                                                  |


# Лабораторная работа 4

## Вопросы

1. **Могут ли участники проекта редактировать или удалять статусы, созданные другими участниками?**
2. **Существует ли ограничение на количество статусов, которые можно создать в рамках одного проекта?**
3. **Можно ли изменить или удалить статус по умолчанию "CREATED"?**
4. **Должны ли названия статусов быть уникальными в рамках проекта? Что произойдет, если попытаться создать статус с уже существующим названием?**
5. **Могут ли задачи существовать без присвоенного статуса или каждой задаче должен быть назначен какой-либо статус?**
6. **Есть ли ограничения на выбор цвета для статусов? Доступен ли полный спектр цветов или ограниченный набор?**
7. **Необходимо ли сохранять историю изменений статусов, включая создание, изменение и удаление?**
8. **Могут ли статусы быть общими между проектами или они уникальны для каждого проекта?**
9. **Как система должна обрабатывать попытку удаления статуса, если он все еще назначен каким-либо задачам?**
10. **Необходимо ли отслеживать изменения статуса задачи в истории изменений задачи?**
11. **Является ли изменение порядка статусов обязательным функционалом или это опциональное требование?**
12. **Какие права необходимы для изменения порядка статусов в проекте?**

---

## Новые функциональные требования

1. **При создании проекта автоматически создаётся статус по умолчанию с названием "CREATED", который не может быть изменён или удалён.**
   - **Этот статус используется как начальный для новых задач.**

2. **После создания задачи автоматически присваивается статус по умолчанию "CREATED", и пользователь становится её создателем.**
   - **Задачи не могут существовать без присвоенного статуса.**

3. **Участник проекта должен иметь возможность просматривать список задач проекта в виде таблицы или доски.**
   - **Задачи могут отображаться в виде "доски", где названия колонок соответствуют статусам, а карточки — задачам с соответствующим статусом.**

4. **Участник проекта должен иметь возможность изменять статус задачи.**
   - **При изменении статуса задачи новый статус должен существовать в проекте.**
   - **Все изменения статуса задачи должны фиксироваться в истории изменений задачи.**

5. **Участники проекта могут создавать, редактировать и удалять статусы внутри проекта.**
   - **Статусы имеют название и цвет для отображения в UI.**
   - **Названия статусов должны быть уникальными в рамках проекта.**
   - **Если попытаться создать статус с уже существующим названием, система отклоняет создание с информативным сообщением, и пользователь возвращается на форму без потери введённых данных.**
   - **Удалить можно только такие статусы, которые не присвоены ни одной задаче в проекте (колонка пустая).**
   - **Статус по умолчанию "CREATED" не может быть изменён или удалён.**
   - **Любой участник проекта может редактировать или удалять статусы, созданные другими участниками, при соблюдении ограничений системы.**
   - **При удалении статуса система проверяет, что статус не назначен ни одной задаче. Если статус назначен задачам, удаление отклоняется с сообщением об ошибке.**

6. **Статусы уникальны для каждого проекта и не могут быть общими между проектами.**
   - **Статусы, созданные в одном проекте, недоступны в других проектах.**

7. **При попытке удалить статус, который назначен задачам, система должна предотвратить удаление и выдать информативное сообщение.**
   - **Удаление отклоняется с сообщением об ошибке, указывающим причины невозможности удаления.**


## Ubiquitous Language

| **Термин**          | **Краткое пояснение**                                                                                                                                                   | **Атрибуты**                                           | **Ассоциированные термины**    | **Действия над предметом**                                                                                                                                                                  |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Статус**          | Статус задачи в проекте, созданный участниками проекта. Отображает стадию выполнения задач и визуализируется в UI с помощью заданного цвета.                             | - Название<br>- Цвет<br>- Идентификатор проекта        | Проект, Задача                | - **Создание** (участник проекта создаёт статус)<br>- **Изменение** (участник редактирует статус)<br>- **Удаление** (участник удаляет статус, если он не назначен ни одной задаче)<br>- **Присвоение** (задаче присваивается статус) |
| **Статус по умолчанию** | Автоматически созданный статус при создании проекта с названием "CREATED". Используется как начальный статус для новых задач.                                         | - Название: "CREATED"<br>- Цвет (предопределённый)<br>- Идентификатор проекта | Проект, Задача, Статус        | (Создаётся автоматически при создании проекта, не может быть удалён или изменён)                                                                                                            |
| **Цвет статуса**    | Цветовое значение, используемое для визуализации статуса в UI.                                                                                                          | - Цвет в формате HEX                                   | Статус                        | - **Установка цвета** (при создании или редактировании статуса)                                                                                                                             |
| **Удаление статуса**| Процесс удаления статуса из проекта. Возможен только если статус не назначен ни одной задаче в проекте.                                                                 |                                                        | Статус, Задача, Проект        |                                                                                                                                                                                             |
| **Присвоение статуса** | Процесс назначения задаче статуса внутри проекта.                                                                                                                     | - Идентификатор задачи<br>- Статус                     | Задача, Статус, Проект        |                                                                                                                                                                                             |

# Обновленные ограниченные контексты

| **Название контекста**           | **Краткое пояснение, если требуется**                                                                                                                                   | **Язык контекста**                                                                                                                                                                                                                                                |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Контекст "Управление проектом"** | Управление созданием и изменением проектов, добавлением участников, **управлением статусами проекта**, удалением проектов и изменением их атрибутов.                       | Проект, Участник, Название проекта, Дата создания, Дата обновления, Добавление участника, Удаление участника, Изменение названия проекта, Удаление проекта, **Статус**, **Статус по умолчанию**, **Порядок статусов**, **Название статуса**, **Цвет статуса**, **Создание статуса**, **Удаление статуса**, **Изменение статуса** |
| **Контекст "Управление задачей"**  | Управление задачами внутри проектов: создание, редактирование, назначение исполнителей, **изменение и присвоение статусов задачам**, удаление задач.                        | Задача, Исполнитель, Название задачи, Описание, Дата создания, Дата обновления, Добавление задачи, Изменение задачи, Удаление задачи, Назначение исполнителя, **Присвоение статуса**, Проект                                                                                                                                   |


## Сущности


| **Сущность**               | **Атрибуты**                                                                                                                                                                                                                                                                                      | **Пояснения, если необходимы по вашему мнению**                                                                                   | **Контекст**                                                                                           |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| **User**                   | - **id**: `UUID`<br>- **nickname**: `String`<br>- **name**: `String`<br>- **password**: `String`                                                                                                                                                                                                  |                                                                                                                                                                        | Авторизация, Управление участниками, Поиск                                                             |
| **Project**                | - **id**: `UUID`<br>- **name**: `String`<br>- **participants**: `List[Participant]`<br>- **tasks**: `List[UUID]`<br>- **statuses**: `List[Status]`                                                                                                          | В `participants` хранятся экземпляры `Participant`, в `tasks`— идентификаторы задач, в `statuses` — список статусов проекта       | Управление проектом, Управление задачей, Управление статусами, Управление участниками, История изменений |
| **Task**                   | - **id**: `UUID`<br>- **projectId**: `UUID`<br>- **description**: `String`<br>- **statusId**: `UUID`<br>- **priority**: `Enum`<br>- **creationDate**: `Date`<br>- **lastUpdate**: `Date`<br>- **estimatedTime**: `Integer`                                    | `statusId` теперь ссылается на сущность `Status`, вместо прежнего `Enum`                                                                                             | Управление задачей, История изменений                                                                  |
| **Status**                 | - **id**: `UUID`<br>- **projectId**: `UUID`<br>- **name**: `String`<br>- **color**: `String`<br>- **orderIndex**: `Integer`                                                                                                                                 | Статус внутри проекта с указанием названия, цвета и порядка отображения                                                                                               | Управление статусами, Управление задачей, История изменений                                            |

## Выделение агрегатов

### Какие сущности и контексты задействованы в функциональных операциях системы

| **Ссылка на функциональное требование** | **Сущности, которые меняются, инварианты, вид согласованности**                                                                                                                                         | **Контекст**                                           |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
| **1. Регистрация пользователя**         | **Сущности:**<br>- `User` (создание нового пользователя)<br><br>**Инварианты:**<br>- Логин должен быть уникальным в системе<br><br>**Согласованность:**<br>- Требуется строгая согласованность для проверки уникальности логина | Авторизация                                            |
| **2. Аутентификация пользователя**      | **Сущности:**<br>- `User` (не изменяется, используется для проверки)<br><br>**Инварианты:**<br>- Пароль соответствует логину<br><br>**Согласованность:**<br>- Строгая согласованность при проверке учетных данных           | Авторизация                                            |
| **3. Создание проекта**                 | **Сущности:**<br>- `Project` (создание нового проекта)<br>- `Status` (создание статуса по умолчанию "CREATED")<br><br>**Инварианты:**<br>- Название проекта должно быть уникальным<br><br>**Согласованность:**<br>- Строгая согласованность   | Управление проектом, Управление статусами              |
| **4. Изменение названия проекта**       | **Сущности:**<br>- `Project` (изменение названия)<br><br>**Инварианты:**<br>- Название проекта должно оставаться уникальным<br><br>**Согласованность:**<br>- Строгая согласованность                                   | Управление проектом                                    |
| **5. Добавление участника в проект**    | **Сущности:**<br>- `Project` (добавление участника в список `participants`)<br>- `Participant` (создание нового участника)<br><br>**Инварианты:**<br>- Пользователь должен существовать<br><br>**Согласованность:**<br>- Строгая согласованность | Управление проектом, Управление участниками            |
| **6. Создание задачи**                  | **Сущности:**<br>- `Task` (создание новой задачи)<br><br>**Инварианты:**<br>- Название задачи уникально в рамках проекта<br>- Статус по умолчанию "CREATED" присваивается задаче<br><br>**Согласованность:**<br>- Строгая согласованность    | Управление задачей, Управление статусами               |
| **7. Изменение задачи**                 | **Сущности:**<br>- `Task` (изменение полей)<br><br>**Инварианты:**<br>- Статус задачи должен существовать в проекте<br><br>**Согласованность:**<br>- Строгая согласованность                                           | Управление задачей, Управление статусами               |
| **8. Создание нового статуса**          | **Сущности:**<br>- `Status` (создание нового статуса)<br>- `Project` (добавление статуса в список `statuses`)<br><br>**Инварианты:**<br>- Название статуса уникально в рамках проекта<br><br>**Согласованность:**<br>- Строгая согласованность | Управление статусами                                   |
| **9. Присвоение статуса задаче**        | **Сущности:**<br>- `Task` (изменение `statusId`)<br><br>**Инварианты:**<br>- Статус должен существовать в проекте<br><br>**Согласованность:**<br>- Строгая согласованность                                             | Управление задачей, Управление статусами               |
| **10. Удаление статуса**                | **Сущности:**<br>- `Status` (удаление статуса)<br>- `Project` (удаление статуса из списка `statuses`)<br><br>**Инварианты:**<br>- Статус не назначен ни одной задаче в проекте<br><br>**Согласованность:**<br>- Строгая согласованность | Управление статусами, Управление задачей               |
| **11. Изменение порядка статусов**      | **Сущности:**<br>- `Status` (изменение `orderIndex`)<br><br>**Инварианты:**<br>- Последовательность `orderIndex` должна быть корректной<br><br>**Согласованность:**<br>- Допустима eventual consistency                 | Управление статусами (опционально)                     |

## Агрегаты

| **Агрегат**        | **Атрибуты и сущности**                                                                                                                                                                      | **Пояснения, если необходимы по вашему мнению**                                                                                               | **Контекст**                                       |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
| **User Aggregate** | - **User**<br>  - `id`, `nickname`, `name`, `password`, `projects`                                                                                                                                       | `User` является корневой сущностью агрегата, представляет пользователя в системе                                                              | Авторизация, Управление участниками, Поиск         |
| **Project Aggregate** | - **Project**<br>  - `id`, `name`, `participants`, `tasks`, `statuses`<br>- **Participant**<br>  - `userId`, `projectId`<br>- **Status**<br>  - `id`, `projectId`, `name`, `color`, `orderIndex` | `Project` является корневой сущностью агрегата, включает в себя участников и статусы проекта. Поддерживает инварианты, связанные со статусами и участниками | Управление проектом, Управление статусами, Управление участниками |
| **Task Aggregate** | - **Task**<br>  - `id`, `projectId`, `description`, `statusId`, `priority`, `creationDate`, `lastUpdate`, `estimatedTime`<br>- **ResponsibleParticipant**<br>  - `userId`, `taskId`          | `Task` является корневой сущностью агрегата, представляет задачу в проекте. Включает ответственного участника                                  | Управление задачей                                    |

### Обоснование выбора агрегатов:

- **User Aggregate** изолирован, поскольку операции над пользователями (регистрация, аутентификация) не затрагивают другие сущности.
- **Project Aggregate** объединяет `Project`, `Participant` и `Status`, поскольку инварианты (например, уникальность названий статусов в проекте) требуют атомарных изменений внутри проекта. Это позволяет поддерживать консистентность данных без необходимости сложных распределенных транзакций.
- **Task Aggregate** отделён от `Project Aggregate`, чтобы избежать излишней связанности и обеспечить более гибкую работу с задачами. Связь между задачей и проектом осуществляется через `projectId`, а консистентность обеспечивается на уровне бизнес-логики.
